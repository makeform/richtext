<div><style type="text/css">.variant{display:none}.has-variant .variant{display:inline}.ql-tool{position:sticky;top:0;background:#fff;z-index:1}.ql-editor{min-height:10em}</style><script type="@plotdb/block">var mod;module.exports={pkg:{name:"@makeform/richtext",extend:{name:"@makeform/common"},i18n:{en:{},"zh-TW":{}},dependencies:[{url:"https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css",type:"css",global:true},{url:"https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"}]},init:function(e){return e.pubsub.fire("subinit",{mod:mod(e)})}};mod=function(e){var t,n,i,r,o,f,d;t=e.root,n=e.ctx,i=e.data,r=e.parent,o=e.t;f=n.ldview,d=n.Quill;return{init:function(){var l,e,u,s,a=this;l=this.mod.child;this.on("change",function(e){var t;e==null&&(e={});t=s.getContents();if(JSON.stringify(t)===JSON.stringify(e.json||{})){return}return s.setContents(e.json||{})});l.view=e=new f({root:t});u=function(){};s=new d(e.get("input"),{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,false]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"]],handlers:{image:function(){var t;t=document.createElement("input");t.setAttribute("type","file");t.setAttribute("accept","image/png, image/gif, image/jpeg");t.onchange=function(){var r,e,o;r={};e=t.files;if(!(e&&e.length)){return}e=[e[0]];t.value=null;o=function(n){var i;i=e[n];if(!i){return Promise.resolve()}return a.mod.child._upload({file:i,progress:u}).then(function(e){var t;e=[(t=import$({},e),t.blob=i,t)];if(r.detail){return r.detail(e)}else{return Promise.resolve(e)}}).then(function(e){var t;e=e[0];delete e.blob;if(!l.file){l.file=[]}else if(!Array.isArray(l.file)){l.file=[l.file]}l.file.push(e);t=s.getSelection();s.insertEmbed(t.index,"image",e.url);return o(n+1)})};return o(0)};return t.click()}}}}});return s.on("text-change",function(e,t,n){var i,r,o;i=s.getText();r=s.getContents();o=s.root.innerHTML;return a.value({json:r,text:i,html:o})})},render:function(){if(this.mod.child.view){return this.mod.child.view.render()}},isEmpty:function(e){e=this.content(e);return typeof e==="undefined"||e===null||!e.text},isEqual:function(e,t){var n,i;n=this.isEmpty(e);i=this.isEmpty(t);if(!n!==!i&&(n||i)){return false}if(n&&i){return true}return JSON.stringify(e)===JSON.stringify(t)},content:function(e){return e||{json:{},text:""}},adapt:function(e){this.mod.child._upload=e.upload;return this.render()}}};function import$(e,t){var n={}.hasOwnProperty;for(var i in t)if(n.call(t,i))e[i]=t[i];return e}</script><div class="form-group has-tips manual" ld="base error-root" plug="widget"><div ld="display" data-display="block"><label class="d-flex align-items-end flex-wrap"><div><span ld="label"></span><span class="variant text-sm ml-2">(<span ld="variant"></span>)</span><span class="text-danger ml-2" ld="is-required">*</span></div><div class="flex-grow-1"></div><div class="m-edit"><div class="mf-note text-sm" ld="limitation"></div></div></label></div><div class="text-sm text-muted" ld="display" data-display="block"><div ld="desc" style="margin:-.6em 0 .7em"></div></div><div class="m-edit position-relative"><div ld="input"></div><div class="d-flex"><div class="p-1 text-danger rounded" ld-each="error"></div></div></div><div class="m-edit" ld="display" data-display="block"><div class="mf-note text-sm mt-2 note" ld-each="note"></div></div><div class="m-view position-relative"><div class="border rounded-sm p-2" ld="content"></div></div></div></div>